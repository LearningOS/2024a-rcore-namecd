# 功能

在`DiskInode`中添加了属性`nlink`来表示硬链接数，并通过`impl Inode`实现了一系列函数用于获取文件的状态信息，如`inode_id`、`mode`、`nlink`，其中`inode_id`需要配合文件系统进行使用。

对于链接一个新的文件，这个函数主要通过`ROOT_INODE`来完成，就是新建一个目录项，并且增加根目录的大小，然后把这个目录项插入。其中的`inode_id`的值是`oldname`的值

取消链接的话，因为没有在某个文件中删除一段数据操作的函数，同时不能主动地缩减文件的大小，所以这里绕了个弯，根据目录项只能获取到`inode_id`和名字，遍历保存得到root下的所有目录项（要取消链接的文件不要），然后先把root下的所有目录项全都删除，在把之前保存的目录项重新插入。这样就可以实现缩小文件大小的操作。然后接下来就是要根据`inode_id`更新链接数，如果链接数小于0，就把这个文件删除。（首先删除`disk_inode`里面的内容，然后再通过文件系统释放占有的bitmap中的位并写回磁盘）

# 问答作业

## ch6

 root inode是一个根目录，存放目录项，用来索引到我们需要的文件。root inode中的内容损坏，我们就无法找到这个目录项，就无法访问这个文件。自然也就不能进行资源回收利用这部分的内容

## ch7

1. 在linux terminal 中，使用命令:`cat text.txt | wc -l`使用cat捕获text.txt的所有内容，然后通过管道符号，将cat的输出当作wc的输入，就可以统计出text.txt的行数
2. 消息队列的方式。把进程的消息放到队列中，其他的进程可以从队列中取出消息。这样的话就不用为每一对进程都建立单独的管道通信，所有进程共享一个或多个消息队列

# 荣誉准则

1. 在完成本次实验的过程（含此前学习的过程）中，我曾分别与 以下各位 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

   > 无


2. 此外，我也参考了 以下资料 ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

   >  无


3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。

